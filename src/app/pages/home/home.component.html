<!-- src/app/pages/home/home.component.html -->

<div class="container">
  <!-- Header -->
  <header class="header">
    <app-provider-selector
      (providerChange)="onProviderChange($event)"
    ></app-provider-selector>
  </header>

  <!-- Controls -->
  <div class="controls">
    <div class="search-box">
      <div class="search-input-wrapper">
        <mat-icon class="search-icon">search</mat-icon>
        
        <input
          type="text"
          [formControl]="searchControl"
          placeholder="Search icons..."
          class="search-input"
          #searchInput
        />
        
        <!-- Clear button - elegant X that appears when typing -->
        <button 
          *ngIf="searchControl.value"
          class="clear-search-btn"
          (click)="clearSearch()"
          type="button"
          matTooltip="Clear search"
          matTooltipPosition="right"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>

    <button
      mat-button
      (click)="onRandom()"
      [disabled]="isLoading"
      class="random-btn"
      [class.active]="currentMode === 'random'"
    >
      <mat-icon>shuffle</mat-icon>
      <span>Random</span>
    </button>
  </div>

  <!-- Results Info -->
  <div
    class="results-info"
    *ngIf="icons.length > 0 || searchControl.value?.trim()"
  >
    <p class="result-count">{{ getResultCountText() }}</p>
    <p class="provider-info">{{ currentProvider }}</p>
  </div>

  <!-- Icons Grid -->
  <div class="icons-grid" *ngIf="icons.length > 0">
    <app-icon-card
      *ngFor="let icon of icons"
      [icon]="icon"
      (download)="onDownload($event)"
    ></app-icon-card>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="icons.length === 0 && !isLoading">
    <mat-icon class="empty-icon">search_off</mat-icon>
    <h2>No icons found</h2>
    <p *ngIf="searchControl.value?.trim()">
      We couldn't find any matches for "{{ searchControl.value }}"
    </p>
    <p *ngIf="!searchControl.value?.trim()">
      Start typing to search or click Random to explore
    </p>
    <button mat-button (click)="onRandom()" class="try-again-btn">
      <mat-icon>shuffle</mat-icon>
      Load Random Icons
    </button>
  </div>

  <!-- Loading -->
  <div class="loading-section" *ngIf="isLoading">
    <app-loading-spinner
      [message]="
        (currentMode === 'search' ? 'Searching' : 'Loading') + 
        ' icons from ' + currentProvider
      "
      size="large"
    ></app-loading-spinner>
  </div>

  <!-- Load More -->
  <div class="footer" *ngIf="!isLoading">
    <button
      *ngIf="hasMore && icons.length > 0"
      mat-button
      (click)="onLoadMore()"
      class="load-more-btn"
      [disabled]="isLoading"
    >
      <mat-icon>expand_more</mat-icon>
      Load More
    </button>
  </div>
</div>

<!-- Selection Footer -->
<app-selection-footer></app-selection-footer>